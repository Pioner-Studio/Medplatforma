
<!-- GENERATED: 2025-09-11 08:00:57 -->
# Routes + Front calls + Directory tree

# Directory tree (filtered)
~~~text
..\medplatforma
  - .editorconfig  (0,5 KB)
  - .env  (0,23 KB)
  - .flaskenv  (0,03 KB)
  - .pre-commit-config.yaml  (1,02 KB)
  - check_db.py  (0,81 KB)
  - db.py  (0,24 KB)
  - main.py  (120,24 KB)
  - medplatforma_backup_2025-09-05_10-20-29.zip  (12679,54 KB)
  - medplatforma_backup_2025-09-05_21-29-11.zip  (12680,65 KB)
  - medplatforma_backup_2025-09-06_21-55-23.zip  (12697,08 KB)
  - medplatforma_backup_2025-09-07_18-53-45.zip  (12701,96 KB)
  - medplatforma_backup_2025-09-09_10-53-54.zip  (13105,69 KB)
  - medplatforma_backup_2025-09-09_22-17-59.zip  (13107,06 KB)
  - migrate_events.py  (1,81 KB)
  - pack.ps1  (1,56 KB)
  - pack_list.txt  (0,22 KB)
  - pyproject.toml  (0,11 KB)
  - README.md  (10,17 KB)
  - reference.md  (0,27 KB)
  - requirements.txt  (0,29 KB)
  - requirements-dev.txt  (0,24 KB)
  - resp.json  (0,89 KB)
  - roadmap_clubstom.md  (3,79 KB)
  - ROUTES.md  (4,89 KB)
  - routes_finance.py  (9,94 KB)
  - routes_schedule.py  (5,16 KB)
  - ru_catalogs.py  (4,64 KB)
  - save_structure.ps1  (3,14 KB)
  - seed.py  (11,19 KB)
  - seed_core.py  (1,54 KB)
  - seed_demo.py  (3,25 KB)
  - seed_doctors.py  (6,01 KB)
  - seed_events.py  (2,84 KB)
  - seed_finance.py  (1,22 KB)
  - seed_imports.py  (0,82 KB)
  - seed_logs.py  (1,94 KB)
  - seed_messages.py  (3,28 KB)
  - seed_partners.py  (1,62 KB)
  - seed_patients.py  (2,29 KB)
  - seed_ru.py  (6,56 KB)
  - seed_services.py  (0,69 KB)
  - seed_staff.py  (2,28 KB)
  - seed_tasks.py  (5,14 KB)
  - seed_xrays.py  (2,88 KB)
  - seed_ztl.py  (2,18 KB)

.profiles
  - calendar.txt  (0,3 KB)
  - docs_common.txt  (0,19 KB)
  - finance.txt  (0,08 KB)
  - patients.txt  (0,08 KB)
  - tooth.txt  (0,07 KB)

.\backups\exports
  - calendar_2025-09-04_17-05_parts.zip  (15,19 KB)
  - main_2025-09-04_17-05_parts.zip  (33,22 KB)
  - main_2025-09-05_09-43_parts.zip  (33,99 KB)
  - main_2025-09-05_10-32_parts.zip  (34,3 KB)

.\backups\exports\main_2025-09-05_09-43_parts
  - main_part_001.txt  (7,11 KB)
  - main_part_002.txt  (8,95 KB)
  - main_part_003.txt  (8,9 KB)
  - main_part_004.txt  (9,1 KB)
  - main_part_005.txt  (9,38 KB)
  - main_part_006.txt  (8,36 KB)
  - main_part_007.txt  (8,21 KB)
  - main_part_008.txt  (8,49 KB)
  - main_part_009.txt  (9,06 KB)
  - main_part_010.txt  (8,74 KB)
  - main_part_011.txt  (9,03 KB)
  - main_part_012.txt  (7,61 KB)

.\docs
  - API_CONTRACTS.md  (0,38 KB)
  - CHANGELOG.md  (0,27 KB)
  - CHECKLIST.md  (10,49 KB)
  - DB_SCHEMA.md  (1,1 KB)
  - EXPORTS_GUIDE.md  (11,4 KB)
  - PATCH_FORMAT.md  (0,87 KB)
  - PROJECT_HEADER.md  (0,38 KB)
  - REQUEST_TEMPLATE.md  (0,74 KB)
  - ROUTES.md  (4,89 KB)
  - ROUTES_MAP.md  (0,86 KB)
  - TEMPLATES_MAP.md  (0,63 KB)
  - WORKFLOW.md  (2,84 KB)

.\docs\export-20250908-0954
  - conflict_rules.md  (0,41 KB)
  - README.md  (0,5 KB)

.\docs\export-20250908-0958
  - conflict_rules.md  (0,41 KB)
  - dicts.json  (12,77 KB)
  - events_week_all.json  (4,93 KB)
  - events_week_by_patient.json  (0,06 KB)
  - patients_min_ivan.json  (0,89 KB)
  - README.md  (0,5 KB)

.\exports
  - ai_workset_.zip  (31,25 KB)
  - ai_workset_2025-08-23_16-09-57.zip  (31,8 KB)
  - ai_workset_PC3_done.zip  (32,66 KB)
  - clubstom_2025-08-18_15-01.zip  (16686,15 KB)
  - clubstom_2025-08-20_22-47.zip  (16690,09 KB)
  - clubstom_2025-08-21_00-02.zip  (16904,07 KB)

.\models
  - services.py  (0,39 KB)

.\routes
  - routes_finance.py  (1,04 KB)

.\scripts
  - bootstrap.ps1  (0,51 KB)
  - concat_docs.ps1  (3,03 KB)
  - export_calendar.ps1  (2,35 KB)
  - export_calendar_segments.ps1  (5,45 KB)
  - export_project_snapshot.ps1  (4,93 KB)
  - export_routes_and_front.ps1  (6,82 KB)
  - export_routes_front_tree.ps1  (7,75 KB)
  - make_docs.ps1  (1,6 KB)
  - make_src_bundle.ps1  (5,24 KB)
  - seed_rooms.py  (0,8 KB)

.\static
  - 1675758150_3_38_1.jpg  (104,81 KB)
  - avatars_clubstom_humans_30.zip  (4029,59 KB)
  - ChatGPT Image 29 июн. 2025 г., 10_17_21.png  (2338,72 KB)
  - ChatGPT Image 29 июн. 2025 г., 10_19_58.png  (1842,52 KB)
  - investor_avatar.png  (133,73 KB)
  - logo_test123.png  (63,48 KB)
  - logo_test1234.png  (9,91 KB)
  - style.css  (31,18 KB)

.\static\avatars
  - doctor_1.png  (133,73 KB)
  - doctor_10.png  (127,97 KB)
  - doctor_2.png  (138,57 KB)
  - doctor_3.png  (140,57 KB)
  - doctor_4.png  (142,35 KB)
  - doctor_5.png  (129,42 KB)
  - doctor_6.png  (126,63 KB)
  - doctor_7.png  (134,69 KB)
  - doctor_8.png  (139,88 KB)
  - doctor_9.png  (137,51 KB)
  - patient_1.png  (126,63 KB)
  - patient_10.png  (129,38 KB)
  - patient_2.png  (134,69 KB)
  - patient_3.png  (139,88 KB)
  - patient_4.png  (137,51 KB)
  - patient_5.png  (127,97 KB)
  - patient_6.png  (125,49 KB)
  - patient_7.png  (138,24 KB)
  - patient_8.png  (129,9 KB)
  - patient_9.png  (139 KB)
  - staff_1.png  (125,49 KB)
  - staff_10.png  (129,42 KB)
  - staff_2.png  (138,24 KB)
  - staff_3.png  (129,9 KB)
  - staff_4.png  (139 KB)
  - staff_5.png  (129,38 KB)
  - staff_6.png  (133,73 KB)
  - staff_7.png  (138,57 KB)
  - staff_8.png  (140,57 KB)
  - staff_9.png  (142,35 KB)

.\static\avatars_clubstom_humans_30
  - doctor_1.png  (133,73 KB)
  - doctor_10.png  (127,97 KB)
  - doctor_2.png  (138,57 KB)
  - doctor_3.png  (140,57 KB)
  - doctor_4.png  (142,35 KB)
  - doctor_5.png  (129,42 KB)
  - doctor_6.png  (126,63 KB)
  - doctor_7.png  (134,69 KB)
  - doctor_8.png  (139,88 KB)
  - doctor_9.png  (137,51 KB)
  - patient_1.png  (126,63 KB)
  - patient_10.png  (129,38 KB)
  - patient_2.png  (134,69 KB)
  - patient_3.png  (139,88 KB)
  - patient_4.png  (137,51 KB)
  - patient_5.png  (127,97 KB)
  - patient_6.png  (125,49 KB)
  - patient_7.png  (138,24 KB)
  - patient_8.png  (129,9 KB)
  - patient_9.png  (139 KB)
  - staff_1.png  (125,49 KB)
  - staff_10.png  (129,42 KB)
  - staff_2.png  (138,24 KB)
  - staff_3.png  (129,9 KB)
  - staff_4.png  (139 KB)
  - staff_5.png  (129,38 KB)
  - staff_6.png  (133,73 KB)
  - staff_7.png  (138,57 KB)
  - staff_8.png  (140,57 KB)
  - staff_9.png  (142,35 KB)

.\static\xrays
  - demo_xray_1.png  (2,28 KB)
  - demo_xray_2.png  (2,28 KB)
  - demo_xray_3.png  (2,29 KB)
  - demo_xray_4.png  (2,29 KB)
  - demo_xray_5.png  (2,29 KB)

.\static\ztl
  - demo_ztl_1.png  (2,09 KB)
  - demo_ztl_2.png  (2,11 KB)
  - demo_ztl_3.png  (2,1 KB)
  - demo_ztl_4.png  (2,11 KB)
  - demo_ztl_5.png  (2,1 KB)

.\templates
  - _layout.html  (0,78 KB)
  - 404.html  (0,34 KB)
  - action_log.html  (1,63 KB)
  - add_doctor.html  (1,72 KB)
  - add_event.html  (5,67 KB)
  - add_expense.html  (1,15 KB)
  - add_patient.html  (2,3 KB)
  - add_payment.html  (1,32 KB)
  - add_room.html  (1,28 KB)
  - add_service.html  (1,57 KB)
  - add_xray.html  (1,61 KB)
  - add_ztl.html  (2,2 KB)
  - backup.html  (0,65 KB)
  - base.html  (3,58 KB)
  - cabinet_card.html  (0,39 KB)
  - calendar.backup.html  (43,12 KB)
  - calendar.html  (68,95 KB)
  - close_appointment.html  (1,79 KB)
  - data_tools.html  (3,37 KB)
  - debtors.html  (0,29 KB)
  - doctor_card.html  (6,31 KB)
  - doctors.html  (4,43 KB)
  - edit_doctor.html  (1,89 KB)
  - edit_event.html  (2,35 KB)
  - edit_patient.html  (2,28 KB)
  - edit_room.html  (1,29 KB)
  - edit_service.html  (1,53 KB)
  - expenses.html  (1,33 KB)
  - finance_report.html  (8,14 KB)
  - import_doctors.html  (1,68 KB)
  - import_patients.html  (2,05 KB)
  - journal.html  (0,99 KB)
  - login.html  (1,18 KB)
  - logs.html  (2,16 KB)
  - messages.html  (2,45 KB)
  - partners.html  (3,64 KB)
  - patient_card.html  (3,07 KB)
  - patients.html  (4,05 KB)
  - reports.html  (0,67 KB)
  - roadmap.html  (0,53 KB)
  - roadmap_missing.html  (0,4 KB)
  - rooms.html  (2,94 KB)
  - services.html  (3,72 KB)
  - sidebar.html  (3,16 KB)
  - staff.html  (1,84 KB)
  - tasks.html  (4,8 KB)
  - topbar.html  (2,04 KB)
  - xray_room.html  (7,81 KB)
  - ztl.html  (7 KB)

.\templates\finance
  - add.html  (4,86 KB)
  - cashbox.html  (2,27 KB)
  - list.html  (4,76 KB)
  - print.html  (1,38 KB)

.\templates\schedule
  - list.html  (2,97 KB)

.\tools
  - __init__.py  (0 KB)
  - check_drift.py  (1,44 KB)
  - collect_context.py  (2,74 KB)
  - dump_routes.py  (1,39 KB)
  - export_project.py  (7,62 KB)
  - Export-ChunksZip.ps1  (2,12 KB)
  - fix_mojibake.ps1  (2,63 KB)
  - generate_docs.py  (8,78 KB)
  - make_export.py  (2,61 KB)
  - normalize_zip_tree.py  (0,66 KB)
  - pack_clean.ps1  (0,68 KB)
  - pack_docs.py  (0,35 KB)
  - pack_for_ai.py  (2,29 KB)
  - update_docs.ps1  (0,19 KB)
  - verify_workset.py  (0,42 KB)

~~~

---

# Flask routes with methods
~~~text
.\main.py:L267: GET /api/patients/<id>/contacts
.\main.py:L353: GET /api/patients/min
.\main.py:L433: GET /api/patients/<id>/min
.\main.py:L3095: GET /patients/<pid>
.\main.py:L3103: GET /patients/<pid>/edit
.\main.py:L3111: POST /patients/<pid>/edit
.\main.py:L3168: GET /patients/<pid>/questionnaire
.\main.py:L3177: POST /patients/<pid>/questionnaire
.\main.py:L3397: GET /healthz
.\main.py:L224: GET /api/patients/<id>
.\main.py:L235: POST /api/patients/<id>/update
.\main.py:L458: GET /patients/<id>
.\main.py:L737: GET /roadmap
.\main.py:L753: POST /api/free_slots
.\main.py:L826: GET /login
.\main.py:L826: POST /login
.\main.py:L841: GET /logout
.\main.py:L849: GET /
.\main.py:L854: GET /favicon.ico
.\main.py:L864: GET /calendar
.\main.py:L928: GET /api/rooms/status_now
.\main.py:L970: GET /api/rooms/today_details
.\main.py:L1034: POST /update_event_time
.\main.py:L1045: GET /export_calendar
.\main.py:L1102: GET /add_event
.\main.py:L1102: POST /add_event
.\main.py:L1216: GET /edit_event/<event_id>
.\main.py:L1216: POST /edit_event/<event_id>
.\main.py:L1336: POST /api/busy_slots
.\main.py:L1352: GET /busy_slots/<doctor_id>
.\main.py:L1373: GET /doctors
.\main.py:L1383: GET /add_doctor
.\main.py:L1383: POST /add_doctor
.\main.py:L1402: GET /doctor_card/<doctor_id>
.\main.py:L1411: GET /doctor_busy_slots/<doctor_id>
.\main.py:L1433: POST /api/doctor_schedule
.\main.py:L1453: GET /finance_report
.\main.py:L1552: GET /finance_report/export
.\main.py:L1599: GET /tasks
.\main.py:L1624: POST /add_task
.\main.py:L1639: GET /mark_task_done/<task_id>
.\main.py:L1646: GET /task/<task_id>
.\main.py:L1668: GET /messages
.\main.py:L1675: GET /ztl
.\main.py:L1690: GET /add_ztl
.\main.py:L1690: POST /add_ztl
.\main.py:L1719: GET /partners
.\main.py:L1741: GET /logs
.\main.py:L1748: GET /backup
.\main.py:L1755: GET /profile
.\main.py:L1760: GET /settings
.\main.py:L1765: GET /data_tools
.\main.py:L1765: POST /data_tools
.\main.py:L1772: GET /export_data
.\main.py:L1805: POST /import_data
.\main.py:L1842: GET /cabinet/<cabinet_name>
.\main.py:L1852: GET /api/events
.\main.py:L1984: GET /api/services/<id>
.\main.py:L2008: GET /api/dicts
.\main.py:L2056: GET /api/rooms/busy
.\main.py:L2110: POST /delete_appointment/<id>
.\main.py:L2136: GET /api/appointments/<id>
.\main.py:L2174: POST /api/appointments/<id>/update
.\main.py:L2259: POST /api/appointments/update_time
.\main.py:L2312: DELETE /api/appointments/<id>
.\main.py:L2321: POST /api/appointments/delete
.\main.py:L2327: POST /schedule/api/delete
.\main.py:L2333: GET /api/services_min
.\main.py:L2343: GET /api/visit_statuses_min
.\main.py:L2351: POST /api/finance/record
.\main.py:L2403: POST /api/chat/<id>/send
.\main.py:L2468: GET /services
.\main.py:L2481: GET /add_service
.\main.py:L2481: POST /add_service
.\main.py:L2504: GET /edit_service/<id>
.\main.py:L2504: POST /edit_service/<id>
.\main.py:L2532: POST /delete_service/<id>
.\main.py:L2574: GET /rooms
.\main.py:L2582: GET /add_room
.\main.py:L2582: POST /add_room
.\main.py:L2610: GET /edit_room/<id>
.\main.py:L2610: POST /edit_room/<id>
.\main.py:L2641: POST /delete_room/<id>
.\main.py:L2693: GET /patients
.\main.py:L2748: GET /add_patient
.\main.py:L2748: POST /add_patient
.\main.py:L2764: GET /edit_patient/<id>
.\main.py:L2764: POST /edit_patient/<id>
.\main.py:L2787: POST /delete_patient/<id>
.\main.py:L2795: GET /patient_card/<id>
.\main.py:L2832: POST /api/patients/<id>/update_info
.\main.py:L2862: POST /api/patients/<id>/update_questionary
.\main.py:L2886: POST /api/patients/<id>/generate_card_no
.\main.py:L2905: GET /api/patients/<id>/full
.\main.py:L3221: POST /api/patients
.\main.py:L3276: POST /api/appointments/create_core
.\main.py:L3387: POST /api/appointments
.\main.py:L3388: POST /api/appointments/create
.\main.py:L3389: POST /schedule/api/create
.\main.py:L3408: GET /api/patients/search
.\routes\routes_finance.py:L14: GET /services
.\routes\routes_finance.py:L20: POST /services
.\routes_finance.py:L108: GET /add
.\routes_finance.py:L122: POST /add
.\routes_finance.py:L184: GET /report/cashbox
.\routes_finance.py:L231: GET /export/csv
.\routes_finance.py:L261: GET /export/json
.\routes_finance.py:L284: POST /import/json
.\routes_schedule.py:L38: GET /
.\routes_schedule.py:L47: POST /add
.\routes_schedule.py:L111: GET /free_slots
~~~

---

# Routes summary by method
~~~text
GET: 67
POST: 43
PUT: 0
PATCH: 0
DELETE: 1
OPTIONS: 0
HEAD: 0
~~~

---

# Templates grouped by folder
~~~text

>>> .\templates
  - _layout.html  (0,78 KB)
  - 404.html  (0,34 KB)
  - action_log.html  (1,63 KB)
  - add_doctor.html  (1,72 KB)
  - add_event.html  (5,67 KB)
  - add_expense.html  (1,15 KB)
  - add_patient.html  (2,3 KB)
  - add_payment.html  (1,32 KB)
  - add_room.html  (1,28 KB)
  - add_service.html  (1,57 KB)
  - add_xray.html  (1,61 KB)
  - add_ztl.html  (2,2 KB)
  - backup.html  (0,65 KB)
  - base.html  (3,58 KB)
  - cabinet_card.html  (0,39 KB)
  - calendar.backup.html  (43,12 KB)
  - calendar.html  (68,95 KB)
  - close_appointment.html  (1,79 KB)
  - data_tools.html  (3,37 KB)
  - debtors.html  (0,29 KB)
  - doctor_card.html  (6,31 KB)
  - doctors.html  (4,43 KB)
  - edit_doctor.html  (1,89 KB)
  - edit_event.html  (2,35 KB)
  - edit_patient.html  (2,28 KB)
  - edit_room.html  (1,29 KB)
  - edit_service.html  (1,53 KB)
  - expenses.html  (1,33 KB)
  - finance_report.html  (8,14 KB)
  - import_doctors.html  (1,68 KB)
  - import_patients.html  (2,05 KB)
  - journal.html  (0,99 KB)
  - login.html  (1,18 KB)
  - logs.html  (2,16 KB)
  - messages.html  (2,45 KB)
  - partners.html  (3,64 KB)
  - patient_card.html  (3,07 KB)
  - patients.html  (4,05 KB)
  - reports.html  (0,67 KB)
  - roadmap.html  (0,53 KB)
  - roadmap_missing.html  (0,4 KB)
  - rooms.html  (2,94 KB)
  - services.html  (3,72 KB)
  - sidebar.html  (3,16 KB)
  - staff.html  (1,84 KB)
  - tasks.html  (4,8 KB)
  - topbar.html  (2,04 KB)
  - xray_room.html  (7,81 KB)
  - ztl.html  (7 KB)

>>> .\templates\finance
  - add.html  (4,86 KB)
  - cashbox.html  (2,27 KB)
  - list.html  (4,76 KB)
  - print.html  (1,38 KB)

>>> .\templates\schedule
  - list.html  (2,97 KB)
~~~

---

# Frontend API calls (fetch/axios/jQuery)
~~~text
.\templates\calendar.backup.html:L724: GET /api/dicts
.\templates\calendar.backup.html:L865: POST /api/patients
.\templates\calendar.backup.html:L1050: POST /api/doctor_schedule
.\templates\calendar.backup.html:L1133: GET /api/events?
.\templates\calendar.backup.html:L1198: POST /api/appointments/update_time
.\templates\calendar.html:L775: GET /api/dicts
.\templates\calendar.html:L941: POST /api/patients
.\templates\calendar.html:L1127: POST /api/doctor_schedule
.\templates\calendar.html:L1226: GET /api/events?
.\templates\calendar.html:L1486: GET /api/rooms/status_now
.\templates\calendar.html:L1660: POST /api/appointments/update_time
.\templates\calendar.html:L1762: POST /api/patients
~~~

---

