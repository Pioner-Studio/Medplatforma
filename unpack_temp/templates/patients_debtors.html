{% extends "base.html" %}
{% block content %}
<div style="max-width: 1400px; margin: 0 auto; padding: 20px">
  <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ -->
  <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 24px">
    <div>
      <h1 style="margin: 0 0 8px 0; font-size: 28px; font-weight: 600; color: #1f2937">
        –°–ø–∏—Å–æ–∫ –¥–æ–ª–∂–Ω–∏–∫–æ–≤
      </h1>
      <p style="margin: 0; color: #6b7280; font-size: 14px">
        –ü–∞—Ü–∏–µ–Ω—Ç–æ–≤ —Å –∑–∞–¥–æ–ª–∂–µ–Ω–Ω–æ—Å—Ç—å—é: <strong>{{ debtors_count }}</strong>
        ‚Ä¢ –û–±—â–∞—è —Å—É–º–º–∞: <strong style="color: #dc2626">{{ total_debt }} ‚ÇΩ</strong>
      </p>
    </div>
    <a href="/patients" style="background: #6b7280; color: white; padding: 10px 16px; border-radius: 8px; text-decoration: none; font-weight: 500">
      –í—Å–µ –ø–∞—Ü–∏–µ–Ω—Ç—ã
    </a>
  </div>

  <!-- –¢–∞–±–ª–∏—Ü–∞ –¥–æ–ª–∂–Ω–∏–∫–æ–≤ -->
  <div style="background: white; border-radius: 12px; box-shadow: 0 1px 3px rgba(0,0,0,0.1); overflow: hidden">
    {% if debtors %}
    <table style="width: 100%; border-collapse: collapse">
      <thead style="background: #f9fafb; border-bottom: 1px solid #e5e7eb">
        <tr>
          <th style="padding: 12px 16px; text-align: left; font-weight: 600; color: #374151; font-size: 13px">
            –ö–∞—Ä—Ç–∞ ‚Ññ
          </th>
          <th style="padding: 12px 16px; text-align: left; font-weight: 600; color: #374151; font-size: 13px">
            –§–ò–û
          </th>
          <th style="padding: 12px 16px; text-align: left; font-weight: 600; color: #374151; font-size: 13px">
            –¢–µ–ª–µ—Ñ–æ–Ω
          </th>
          <th style="padding: 12px 16px; text-align: right; font-weight: 600; color: #374151; font-size: 13px">
            –°—É–º–º–∞ –¥–æ–ª–≥–∞
          </th>
          <th style="padding: 12px 16px; text-align: center; font-weight: 600; color: #374151; font-size: 13px">
            –î–µ–π—Å—Ç–≤–∏—è
          </th>
        </tr>
      </thead>
      <tbody>
        {% for patient in debtors %}
        <tr style="border-bottom: 1px solid #f3f4f6; {% if loop.index % 2 == 0 %}background: #fafafa{% endif %}">
          <td style="padding: 12px 16px; font-size: 14px">
            {{ patient.card_no or '‚Äî' }}
          </td>
          <td style="padding: 12px 16px">
            <a href="/patients/{{ patient._id }}" style="color: #2563eb; text-decoration: none; font-weight: 500">
              {{ patient.full_name }}
            </a>
          </td>
          <td style="padding: 12px 16px; font-size: 14px; color: #6b7280">
            {{ patient.phone or '‚Äî' }}
          </td>
          <td style="padding: 12px 16px; text-align: right">
            <span style="
              background: #fee2e2;
              color: #dc2626;
              padding: 4px 12px;
              border-radius: 6px;
              font-weight: 600;
              font-size: 14px
            ">
              {{ patient.debt_balance }} ‚ÇΩ
            </span>
          </td>
          <td style="padding: 12px 16px; text-align: center">
            <a
              href="/finance/add?patient_id={{ patient._id }}&type=income"
              target="_blank"
              style="
                background: #10b981;
                color: white;
                padding: 6px 14px;
                border-radius: 6px;
                text-decoration: none;
                font-size: 13px;
                font-weight: 500;
                display: inline-block
              "
            >
              üí≥ –ü—Ä–∏–Ω—è—Ç—å –æ–ø–ª–∞—Ç—É
            </a>
          </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
    {% else %}
    <div style="padding: 60px 20px; text-align: center; color: #9ca3af">
      <p style="font-size: 18px; margin: 0">–ù–µ—Ç –ø–∞—Ü–∏–µ–Ω—Ç–æ–≤ —Å –∑–∞–¥–æ–ª–∂–µ–Ω–Ω–æ—Å—Ç—å—é</p>
      <p style="font-size: 14px; margin: 8px 0 0 0">–í—Å–µ –¥–æ–ª–≥–∏ –ø–æ–≥–∞—à–µ–Ω—ã! üéâ</p>
    </div>
    {% endif %}
  </div>
</div>
{% endblock %}
