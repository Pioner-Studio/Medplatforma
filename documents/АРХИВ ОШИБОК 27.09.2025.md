# АРХИВ ОШИБОК И РЕШЕНИЙ
*Дата: 27.09.2025*

## ОШИБКА #1: UndefinedError 'form' is undefined

**Дата:** 27.09.2025
**Модуль:** templates/edit_service.html, main.py edit_service
**Симптомы:** При редактировании услуги ошибка на строке 3371

**Причина:**
1. Функция edit_service() передавала item в шаблон
2. Шаблон ожидал form
3. Несоответствие имён переменных

**Решение:**
1. main.py (строки 3361, 3367): item=item → form=item
2. templates/edit_service.html: {{ item. → {{ form.
3. Команда: `(Get-Content templates\edit_service.html -Raw) -replace 'item\.', 'form.' | Set-Content templates\edit_service.html`

**Статус:** ✅ Исправлено

---

## ОШИБКА #2: Льготная цена не применяется

**Дата:** 27.09.2025
**Модуль:** routes_finance.py add_post()
**Симптомы:** Вместо 2500₽ подставлялось 5000₽

**Причина:** Неправильные отступы - блок if use_preferential был вне if svc_oid:

**Решение:** Добавлено 4 пробела отступа к строкам 45-50 в routes_finance.py

**Статус:** ✅ Исправлено

---

## ШАБЛОН ДЛЯ НОВЫХ ЗАПИСЕЙ
Ошибка: [название]
Симптом:
Причина:
Решение:
Статус:

