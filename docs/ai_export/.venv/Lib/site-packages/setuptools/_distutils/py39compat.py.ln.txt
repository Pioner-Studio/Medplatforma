    1: import sys
    2: import platform
    3: 
    4: 
    5: def add_ext_suffix_39(vars):
    6:     """
    7:     Ensure vars contains 'EXT_SUFFIX'. pypa/distutils#130
    8:     """
    9:     import _imp
   10: 
   11:     ext_suffix = _imp.extension_suffixes()[0]
   12:     vars.update(
   13:         EXT_SUFFIX=ext_suffix,
   14:         # sysconfig sets SO to match EXT_SUFFIX, so maintain
   15:         # that expectation.
   16:         # https://github.com/python/cpython/blob/785cc6770588de087d09e89a69110af2542be208/Lib/sysconfig.py#L671-L673
   17:         SO=ext_suffix,
   18:     )
   19: 
   20: 
   21: needs_ext_suffix = sys.version_info < (3, 10) and platform.system() == 'Windows'
   22: add_ext_suffix = add_ext_suffix_39 if needs_ext_suffix else lambda vars: None
