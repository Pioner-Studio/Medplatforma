    1: # http://g95.sourceforge.net/
    2: from numpy.distutils.fcompiler import FCompiler
    3: 
    4: compilers = ['G95FCompiler']
    5: 
    6: class G95FCompiler(FCompiler):
    7:     compiler_type = 'g95'
    8:     description = 'G95 Fortran Compiler'
    9: 
   10: #    version_pattern = r'G95 \((GCC (?P<gccversion>[\d.]+)|.*?) \(g95!\) (?P<version>.*)\).*'
   11:     # $ g95 --version
   12:     # G95 (GCC 4.0.3 (g95!) May 22 2006)
   13: 
   14:     version_pattern = r'G95 \((GCC (?P<gccversion>[\d.]+)|.*?) \(g95 (?P<version>.*)!\) (?P<date>.*)\).*'
   15:     # $ g95 --version
   16:     # G95 (GCC 4.0.3 (g95 0.90!) Aug 22 2006)
   17: 
   18:     executables = {
   19:         'version_cmd'  : ["<F90>", "--version"],
   20:         'compiler_f77' : ["g95", "-ffixed-form"],
   21:         'compiler_fix' : ["g95", "-ffixed-form"],
   22:         'compiler_f90' : ["g95"],
   23:         'linker_so'    : ["<F90>", "-shared"],
   24:         'archiver'     : ["ar", "-cr"],
   25:         'ranlib'       : ["ranlib"]
   26:         }
   27:     pic_flags = ['-fpic']
   28:     module_dir_switch = '-fmod='
   29:     module_include_switch = '-I'
   30: 
   31:     def get_flags(self):
   32:         return ['-fno-second-underscore']
   33:     def get_flags_opt(self):
   34:         return ['-O']
   35:     def get_flags_debug(self):
   36:         return ['-g']
   37: 
   38: if __name__ == '__main__':
   39:     from distutils import log
   40:     from numpy.distutils import customized_fcompiler
   41:     log.set_verbosity(2)
   42:     print(customized_fcompiler('g95').get_version())
