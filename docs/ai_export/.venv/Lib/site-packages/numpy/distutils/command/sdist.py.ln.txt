    1: import sys
    2: if 'setuptools' in sys.modules:
    3:     from setuptools.command.sdist import sdist as old_sdist
    4: else:
    5:     from distutils.command.sdist import sdist as old_sdist
    6: 
    7: from numpy.distutils.misc_util import get_data_files
    8: 
    9: class sdist(old_sdist):
   10: 
   11:     def add_defaults (self):
   12:         old_sdist.add_defaults(self)
   13: 
   14:         dist = self.distribution
   15: 
   16:         if dist.has_data_files():
   17:             for data in dist.data_files:
   18:                 self.filelist.extend(get_data_files(data))
   19: 
   20:         if dist.has_headers():
   21:             headers = []
   22:             for h in dist.headers:
   23:                 if isinstance(h, str): headers.append(h)
   24:                 else: headers.append(h[1])
   25:             self.filelist.extend(headers)
   26: 
   27:         return
