    1: """
    2: Provide python-space access to the functions exposed in numpy/__init__.pxd
    3: for testing.
    4: """
    5: 
    6: import os
    7: from distutils.core import setup
    8: 
    9: import Cython
   10: from Cython.Build import cythonize
   11: from setuptools.extension import Extension
   12: 
   13: import numpy as np
   14: from numpy._utils import _pep440
   15: 
   16: macros = [
   17:     ("NPY_NO_DEPRECATED_API", 0),
   18:     # Require 1.25+ to test datetime additions
   19:     ("NPY_TARGET_VERSION", "NPY_2_0_API_VERSION"),
   20: ]
   21: 
   22: checks = Extension(
   23:     "checks",
   24:     sources=[os.path.join('.', "checks.pyx")],
   25:     include_dirs=[np.get_include()],
   26:     define_macros=macros,
   27: )
   28: 
   29: extensions = [checks]
   30: 
   31: compiler_directives = {}
   32: if _pep440.parse(Cython.__version__) >= _pep440.parse("3.1.0a0"):
   33:     compiler_directives['freethreading_compatible'] = True
   34: 
   35: setup(
   36:     ext_modules=cythonize(
   37:         extensions,
   38:         compiler_directives=compiler_directives)
   39: )
