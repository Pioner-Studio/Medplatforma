    1: import sys
    2: 
    3: import pytest
    4: 
    5: from numpy.testing import IS_PYPY
    6: 
    7: from . import util
    8: 
    9: 
   10: @pytest.mark.slow
   11: class TestBlockDocString(util.F2PyTest):
   12:     sources = [util.getpath("tests", "src", "block_docstring", "foo.f")]
   13: 
   14:     @pytest.mark.skipif(sys.platform == "win32",
   15:                         reason="Fails with MinGW64 Gfortran (Issue #9673)")
   16:     @pytest.mark.xfail(IS_PYPY,
   17:                        reason="PyPy cannot modify tp_doc after PyType_Ready")
   18:     def test_block_docstring(self):
   19:         expected = "bar : 'i'-array(2,3)\n"
   20:         assert self.module.block.__doc__ == expected
