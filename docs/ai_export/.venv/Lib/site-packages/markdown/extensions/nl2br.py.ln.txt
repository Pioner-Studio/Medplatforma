    1: # `NL2BR` Extension
    2: # ===============
    3: 
    4: # A Python-Markdown extension to treat newlines as hard breaks; like
    5: # GitHub-flavored Markdown does.
    6: 
    7: # See https://Python-Markdown.github.io/extensions/nl2br
    8: # for documentation.
    9: 
   10: # Original code Copyright 2011 [Brian Neal](https://deathofagremmie.com/)
   11: 
   12: # All changes Copyright 2011-2014 The Python Markdown Project
   13: 
   14: # License: [BSD](https://opensource.org/licenses/bsd-license.php)
   15: 
   16: """
   17: A Python-Markdown extension to treat newlines as hard breaks; like
   18: GitHub-flavored Markdown does.
   19: 
   20: See the [documentation](https://Python-Markdown.github.io/extensions/nl2br)
   21: for details.
   22: """
   23: 
   24: from __future__ import annotations
   25: 
   26: from . import Extension
   27: from ..inlinepatterns import SubstituteTagInlineProcessor
   28: 
   29: BR_RE = r'\n'
   30: 
   31: 
   32: class Nl2BrExtension(Extension):
   33: 
   34:     def extendMarkdown(self, md):
   35:         """ Add a `SubstituteTagInlineProcessor` to Markdown. """
   36:         br_tag = SubstituteTagInlineProcessor(BR_RE, 'br')
   37:         md.inlinePatterns.register(br_tag, 'nl', 5)
   38: 
   39: 
   40: def makeExtension(**kwargs):  # pragma: no cover
   41:     return Nl2BrExtension(**kwargs)
