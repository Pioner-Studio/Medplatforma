    1: from __future__ import annotations
    2: 
    3: import argparse
    4: import json
    5: from collections.abc import Sequence
    6: 
    7: from identify import identify
    8: 
    9: 
   10: def main(argv: Sequence[str] | None = None) -> int:
   11:     parser = argparse.ArgumentParser()
   12:     parser.add_argument('--filename-only', action='store_true')
   13:     parser.add_argument('path')
   14:     args = parser.parse_args(argv)
   15: 
   16:     if args.filename_only:
   17:         func = identify.tags_from_filename
   18:     else:
   19:         func = identify.tags_from_path
   20: 
   21:     try:
   22:         tags = sorted(func(args.path))
   23:     except ValueError as e:
   24:         print(e)
   25:         return 1
   26: 
   27:     if not tags:
   28:         return 1
   29:     else:
   30:         print(json.dumps(tags))
   31:         return 0
   32: 
   33: 
   34: if __name__ == '__main__':
   35:     raise SystemExit(main())
