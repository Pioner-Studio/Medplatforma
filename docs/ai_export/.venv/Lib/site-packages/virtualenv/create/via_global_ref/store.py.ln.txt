    1: from __future__ import annotations
    2: 
    3: from pathlib import Path
    4: 
    5: 
    6: def handle_store_python(meta, interpreter):
    7:     if is_store_python(interpreter):
    8:         meta.symlink_error = "Windows Store Python does not support virtual environments via symlink"
    9:     return meta
   10: 
   11: 
   12: def is_store_python(interpreter):
   13:     parts = Path(interpreter.system_executable).parts
   14:     return (
   15:         len(parts) > 4  # noqa: PLR2004
   16:         and parts[-4] == "Microsoft"
   17:         and parts[-3] == "WindowsApps"
   18:         and parts[-2].startswith("PythonSoftwareFoundation.Python.3.")
   19:         and parts[-1].startswith("python")
   20:     )
   21: 
   22: 
   23: __all__ = [
   24:     "handle_store_python",
   25:     "is_store_python",
   26: ]
