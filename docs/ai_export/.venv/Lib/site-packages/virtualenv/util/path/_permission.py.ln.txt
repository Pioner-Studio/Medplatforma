    1: from __future__ import annotations
    2: 
    3: import os
    4: from stat import S_IXGRP, S_IXOTH, S_IXUSR
    5: 
    6: 
    7: def make_exe(filename):
    8:     original_mode = filename.stat().st_mode
    9:     levels = [S_IXUSR, S_IXGRP, S_IXOTH]
   10:     for at in range(len(levels), 0, -1):
   11:         try:
   12:             mode = original_mode
   13:             for level in levels[:at]:
   14:                 mode |= level
   15:             filename.chmod(mode)
   16:             break
   17:         except OSError:
   18:             continue
   19: 
   20: 
   21: def set_tree(folder, stat):
   22:     for root, _, files in os.walk(str(folder)):
   23:         for filename in files:
   24:             os.chmod(os.path.join(root, filename), stat)
   25: 
   26: 
   27: __all__ = (
   28:     "make_exe",
   29:     "set_tree",
   30: )
