    1: from __future__ import annotations
    2: 
    3: import subprocess
    4: 
    5: CREATE_NO_WINDOW = 0x80000000
    6: 
    7: 
    8: def run_cmd(cmd):
    9:     try:
   10:         process = subprocess.Popen(
   11:             cmd,
   12:             universal_newlines=True,
   13:             stdin=subprocess.PIPE,
   14:             stderr=subprocess.PIPE,
   15:             stdout=subprocess.PIPE,
   16:             encoding="utf-8",
   17:         )
   18:         out, err = process.communicate()  # input disabled
   19:         code = process.returncode
   20:     except OSError as error:
   21:         code, out, err = error.errno, "", error.strerror
   22:         if code == 2 and "file" in err:  # noqa: PLR2004
   23:             err = str(error)  # FileNotFoundError in Python >= 3.3
   24:     return code, out, err
   25: 
   26: 
   27: __all__ = (
   28:     "CREATE_NO_WINDOW",
   29:     "run_cmd",
   30: )
