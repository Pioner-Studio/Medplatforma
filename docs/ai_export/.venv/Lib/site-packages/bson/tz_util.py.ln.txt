    1: # Copyright 2010-2015 MongoDB, Inc.
    2: #
    3: # Licensed under the Apache License, Version 2.0 (the "License");
    4: # you may not use this file except in compliance with the License.
    5: # You may obtain a copy of the License at
    6: #
    7: # http://www.apache.org/licenses/LICENSE-2.0
    8: #
    9: # Unless required by applicable law or agreed to in writing, software
   10: # distributed under the License is distributed on an "AS IS" BASIS,
   11: # WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   12: # See the License for the specific language governing permissions and
   13: # limitations under the License.
   14: 
   15: """Timezone related utilities for BSON."""
   16: from __future__ import annotations
   17: 
   18: from datetime import datetime, timedelta, tzinfo
   19: from typing import Optional, Tuple, Union
   20: 
   21: ZERO: timedelta = timedelta(0)
   22: 
   23: 
   24: class FixedOffset(tzinfo):
   25:     """Fixed offset timezone, in minutes east from UTC.
   26: 
   27:     Implementation based from the Python `standard library documentation
   28:     <http://docs.python.org/library/datetime.html#tzinfo-objects>`_.
   29:     Defining __getinitargs__ enables pickling / copying.
   30:     """
   31: 
   32:     def __init__(self, offset: Union[float, timedelta], name: str) -> None:
   33:         if isinstance(offset, timedelta):
   34:             self.__offset = offset
   35:         else:
   36:             self.__offset = timedelta(minutes=offset)
   37:         self.__name = name
   38: 
   39:     def __getinitargs__(self) -> Tuple[timedelta, str]:
   40:         return self.__offset, self.__name
   41: 
   42:     def utcoffset(self, dt: Optional[datetime]) -> timedelta:
   43:         return self.__offset
   44: 
   45:     def tzname(self, dt: Optional[datetime]) -> str:
   46:         return self.__name
   47: 
   48:     def dst(self, dt: Optional[datetime]) -> timedelta:
   49:         return ZERO
   50: 
   51: 
   52: utc: FixedOffset = FixedOffset(0, "UTC")
   53: """Fixed offset timezone representing UTC."""
