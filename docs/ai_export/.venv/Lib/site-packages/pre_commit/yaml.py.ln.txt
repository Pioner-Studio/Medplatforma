    1: from __future__ import annotations
    2: 
    3: import functools
    4: from typing import Any
    5: 
    6: import yaml
    7: 
    8: Loader = getattr(yaml, 'CSafeLoader', yaml.SafeLoader)
    9: yaml_compose = functools.partial(yaml.compose, Loader=Loader)
   10: yaml_load = functools.partial(yaml.load, Loader=Loader)
   11: Dumper = getattr(yaml, 'CSafeDumper', yaml.SafeDumper)
   12: 
   13: 
   14: def yaml_dump(o: Any, **kwargs: Any) -> str:
   15:     # when python/mypy#1484 is solved, this can be `functools.partial`
   16:     return yaml.dump(
   17:         o, Dumper=Dumper, default_flow_style=False, indent=4, sort_keys=False,
   18:         **kwargs,
   19:     )
