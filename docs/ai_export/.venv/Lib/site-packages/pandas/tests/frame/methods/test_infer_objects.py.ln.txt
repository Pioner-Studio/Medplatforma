    1: from datetime import datetime
    2: 
    3: from pandas import DataFrame
    4: import pandas._testing as tm
    5: 
    6: 
    7: class TestInferObjects:
    8:     def test_infer_objects(self):
    9:         # GH#11221
   10:         df = DataFrame(
   11:             {
   12:                 "a": ["a", 1, 2, 3],
   13:                 "b": ["b", 2.0, 3.0, 4.1],
   14:                 "c": [
   15:                     "c",
   16:                     datetime(2016, 1, 1),
   17:                     datetime(2016, 1, 2),
   18:                     datetime(2016, 1, 3),
   19:                 ],
   20:                 "d": [1, 2, 3, "d"],
   21:             },
   22:             columns=["a", "b", "c", "d"],
   23:         )
   24:         df = df.iloc[1:].infer_objects()
   25: 
   26:         assert df["a"].dtype == "int64"
   27:         assert df["b"].dtype == "float64"
   28:         assert df["c"].dtype == "M8[ns]"
   29:         assert df["d"].dtype == "object"
   30: 
   31:         expected = DataFrame(
   32:             {
   33:                 "a": [1, 2, 3],
   34:                 "b": [2.0, 3.0, 4.1],
   35:                 "c": [datetime(2016, 1, 1), datetime(2016, 1, 2), datetime(2016, 1, 3)],
   36:                 "d": [2, 3, "d"],
   37:             },
   38:             columns=["a", "b", "c", "d"],
   39:         )
   40:         # reconstruct frame to verify inference is same
   41:         result = df.reset_index(drop=True)
   42:         tm.assert_frame_equal(result, expected)
