    1: import pytest
    2: 
    3: from pandas import (
    4:     Series,
    5:     Timedelta,
    6:     TimedeltaIndex,
    7:     timedelta_range,
    8: )
    9: import pandas._testing as tm
   10: 
   11: pytestmark = pytest.mark.filterwarnings(
   12:     "ignore:Setting a value on a view:FutureWarning"
   13: )
   14: 
   15: 
   16: @pytest.mark.parametrize(
   17:     "cons",
   18:     [
   19:         lambda x: TimedeltaIndex(x),
   20:         lambda x: TimedeltaIndex(TimedeltaIndex(x)),
   21:     ],
   22: )
   23: def test_timedeltaindex(using_copy_on_write, cons):
   24:     dt = timedelta_range("1 day", periods=3)
   25:     ser = Series(dt)
   26:     idx = cons(ser)
   27:     expected = idx.copy(deep=True)
   28:     ser.iloc[0] = Timedelta("5 days")
   29:     if using_copy_on_write:
   30:         tm.assert_index_equal(idx, expected)
