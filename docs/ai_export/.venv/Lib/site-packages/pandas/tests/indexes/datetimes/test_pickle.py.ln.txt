    1: import pytest
    2: 
    3: from pandas import (
    4:     NaT,
    5:     date_range,
    6:     to_datetime,
    7: )
    8: import pandas._testing as tm
    9: 
   10: 
   11: class TestPickle:
   12:     def test_pickle(self):
   13:         # GH#4606
   14:         idx = to_datetime(["2013-01-01", NaT, "2014-01-06"])
   15:         idx_p = tm.round_trip_pickle(idx)
   16:         assert idx_p[0] == idx[0]
   17:         assert idx_p[1] is NaT
   18:         assert idx_p[2] == idx[2]
   19: 
   20:     def test_pickle_dont_infer_freq(self):
   21:         # GH#11002
   22:         # don't infer freq
   23:         idx = date_range("1750-1-1", "2050-1-1", freq="7D")
   24:         idx_p = tm.round_trip_pickle(idx)
   25:         tm.assert_index_equal(idx, idx_p)
   26: 
   27:     def test_pickle_after_set_freq(self):
   28:         dti = date_range("20130101", periods=3, tz="US/Eastern", name="foo")
   29:         dti = dti._with_freq(None)
   30: 
   31:         res = tm.round_trip_pickle(dti)
   32:         tm.assert_index_equal(res, dti)
   33: 
   34:     def test_roundtrip_pickle_with_tz(self):
   35:         # GH#8367
   36:         # round-trip of timezone
   37:         index = date_range("20130101", periods=3, tz="US/Eastern", name="foo")
   38:         unpickled = tm.round_trip_pickle(index)
   39:         tm.assert_index_equal(index, unpickled)
   40: 
   41:     @pytest.mark.parametrize("freq", ["B", "C"])
   42:     def test_pickle_unpickle(self, freq):
   43:         rng = date_range("2009-01-01", "2010-01-01", freq=freq)
   44:         unpickled = tm.round_trip_pickle(rng)
   45:         assert unpickled.freq == freq
