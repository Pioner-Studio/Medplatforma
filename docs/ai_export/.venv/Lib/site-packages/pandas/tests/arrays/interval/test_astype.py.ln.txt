    1: import pytest
    2: 
    3: from pandas import (
    4:     Categorical,
    5:     CategoricalDtype,
    6:     Index,
    7:     IntervalIndex,
    8: )
    9: import pandas._testing as tm
   10: 
   11: 
   12: class TestAstype:
   13:     @pytest.mark.parametrize("ordered", [True, False])
   14:     def test_astype_categorical_retains_ordered(self, ordered):
   15:         index = IntervalIndex.from_breaks(range(5))
   16:         arr = index._data
   17: 
   18:         dtype = CategoricalDtype(None, ordered=ordered)
   19: 
   20:         expected = Categorical(list(arr), ordered=ordered)
   21:         result = arr.astype(dtype)
   22:         assert result.ordered is ordered
   23:         tm.assert_categorical_equal(result, expected)
   24: 
   25:         # test IntervalIndex.astype while we're at it.
   26:         result = index.astype(dtype)
   27:         expected = Index(expected)
   28:         tm.assert_index_equal(result, expected)
