    1: import numpy as np
    2: import pytest
    3: import pytz
    4: 
    5: from pandas._libs.tslibs.tzconversion import tz_localize_to_utc
    6: 
    7: 
    8: class TestTZLocalizeToUTC:
    9:     def test_tz_localize_to_utc_ambiguous_infer(self):
   10:         # val is a timestamp that is ambiguous when localized to US/Eastern
   11:         val = 1_320_541_200_000_000_000
   12:         vals = np.array([val, val - 1, val], dtype=np.int64)
   13: 
   14:         with pytest.raises(pytz.AmbiguousTimeError, match="2011-11-06 01:00:00"):
   15:             tz_localize_to_utc(vals, pytz.timezone("US/Eastern"), ambiguous="infer")
   16: 
   17:         with pytest.raises(pytz.AmbiguousTimeError, match="are no repeated times"):
   18:             tz_localize_to_utc(vals[:1], pytz.timezone("US/Eastern"), ambiguous="infer")
   19: 
   20:         vals[1] += 1
   21:         msg = "There are 2 dst switches when there should only be 1"
   22:         with pytest.raises(pytz.AmbiguousTimeError, match=msg):
   23:             tz_localize_to_utc(vals, pytz.timezone("US/Eastern"), ambiguous="infer")
