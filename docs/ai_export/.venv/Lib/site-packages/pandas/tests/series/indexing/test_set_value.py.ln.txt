    1: from datetime import datetime
    2: 
    3: import numpy as np
    4: 
    5: from pandas import (
    6:     DatetimeIndex,
    7:     Series,
    8: )
    9: import pandas._testing as tm
   10: 
   11: 
   12: def test_series_set_value():
   13:     # GH#1561
   14: 
   15:     dates = [datetime(2001, 1, 1), datetime(2001, 1, 2)]
   16:     index = DatetimeIndex(dates)
   17: 
   18:     s = Series(dtype=object)
   19:     s._set_value(dates[0], 1.0)
   20:     s._set_value(dates[1], np.nan)
   21: 
   22:     expected = Series([1.0, np.nan], index=index)
   23: 
   24:     tm.assert_series_equal(s, expected)
   25: 
   26: 
   27: def test_set_value_dt64(datetime_series):
   28:     idx = datetime_series.index[10]
   29:     res = datetime_series._set_value(idx, 0)
   30:     assert res is None
   31:     assert datetime_series[idx] == 0
   32: 
   33: 
   34: def test_set_value_str_index(string_series):
   35:     # equiv
   36:     ser = string_series.copy()
   37:     res = ser._set_value("foobar", 0)
   38:     assert res is None
   39:     assert ser.index[-1] == "foobar"
   40:     assert ser["foobar"] == 0
   41: 
   42:     ser2 = string_series.copy()
   43:     ser2.loc["foobar"] = 0
   44:     assert ser2.index[-1] == "foobar"
   45:     assert ser2["foobar"] == 0
