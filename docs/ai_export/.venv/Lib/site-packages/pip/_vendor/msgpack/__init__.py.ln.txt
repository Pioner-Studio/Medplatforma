    1: # ruff: noqa: F401
    2: import os
    3: 
    4: from .exceptions import *  # noqa: F403
    5: from .ext import ExtType, Timestamp
    6: 
    7: version = (1, 1, 1)
    8: __version__ = "1.1.1"
    9: 
   10: 
   11: if os.environ.get("MSGPACK_PUREPYTHON"):
   12:     from .fallback import Packer, Unpacker, unpackb
   13: else:
   14:     try:
   15:         from ._cmsgpack import Packer, Unpacker, unpackb
   16:     except ImportError:
   17:         from .fallback import Packer, Unpacker, unpackb
   18: 
   19: 
   20: def pack(o, stream, **kwargs):
   21:     """
   22:     Pack object `o` and write it to `stream`
   23: 
   24:     See :class:`Packer` for options.
   25:     """
   26:     packer = Packer(**kwargs)
   27:     stream.write(packer.pack(o))
   28: 
   29: 
   30: def packb(o, **kwargs):
   31:     """
   32:     Pack object `o` and return packed bytes
   33: 
   34:     See :class:`Packer` for options.
   35:     """
   36:     return Packer(**kwargs).pack(o)
   37: 
   38: 
   39: def unpack(stream, **kwargs):
   40:     """
   41:     Unpack an object from `stream`.
   42: 
   43:     Raises `ExtraData` when `stream` contains extra bytes.
   44:     See :class:`Unpacker` for options.
   45:     """
   46:     data = stream.read()
   47:     return unpackb(data, **kwargs)
   48: 
   49: 
   50: # alias for compatibility to simplejson/marshal/pickle.
   51: load = unpack
   52: loads = unpackb
   53: 
   54: dump = pack
   55: dumps = packb
