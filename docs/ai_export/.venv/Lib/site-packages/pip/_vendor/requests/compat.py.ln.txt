    1: """
    2: requests.compat
    3: ~~~~~~~~~~~~~~~
    4: 
    5: This module previously handled import compatibility issues
    6: between Python 2 and Python 3. It remains for backwards
    7: compatibility until the next major version.
    8: """
    9: 
   10: import sys
   11: 
   12: # -------
   13: # urllib3
   14: # -------
   15: from pip._vendor.urllib3 import __version__ as urllib3_version
   16: 
   17: # Detect which major version of urllib3 is being used.
   18: try:
   19:     is_urllib3_1 = int(urllib3_version.split(".")[0]) == 1
   20: except (TypeError, AttributeError):
   21:     # If we can't discern a version, prefer old functionality.
   22:     is_urllib3_1 = True
   23: 
   24: # -------------------
   25: # Character Detection
   26: # -------------------
   27: 
   28: 
   29: def _resolve_char_detection():
   30:     """Find supported character detection libraries."""
   31:     chardet = None
   32:     return chardet
   33: 
   34: 
   35: chardet = _resolve_char_detection()
   36: 
   37: # -------
   38: # Pythons
   39: # -------
   40: 
   41: # Syntax sugar.
   42: _ver = sys.version_info
   43: 
   44: #: Python 2.x?
   45: is_py2 = _ver[0] == 2
   46: 
   47: #: Python 3.x?
   48: is_py3 = _ver[0] == 3
   49: 
   50: # Note: We've patched out simplejson support in pip because it prevents
   51: #       upgrading simplejson on Windows.
   52: import json
   53: from json import JSONDecodeError
   54: 
   55: # Keep OrderedDict for backwards compatibility.
   56: from collections import OrderedDict
   57: from collections.abc import Callable, Mapping, MutableMapping
   58: from http import cookiejar as cookielib
   59: from http.cookies import Morsel
   60: from io import StringIO
   61: 
   62: # --------------
   63: # Legacy Imports
   64: # --------------
   65: from urllib.parse import (
   66:     quote,
   67:     quote_plus,
   68:     unquote,
   69:     unquote_plus,
   70:     urldefrag,
   71:     urlencode,
   72:     urljoin,
   73:     urlparse,
   74:     urlsplit,
   75:     urlunparse,
   76: )
   77: from urllib.request import (
   78:     getproxies,
   79:     getproxies_environment,
   80:     parse_http_list,
   81:     proxy_bypass,
   82:     proxy_bypass_environment,
   83: )
   84: 
   85: builtin_str = str
   86: str = str
   87: bytes = bytes
   88: basestring = (str, bytes)
   89: numeric_types = (int, float)
   90: integer_types = (int,)
