    1: """Legacy editable installation process, i.e. `setup.py develop`."""
    2: 
    3: from __future__ import annotations
    4: 
    5: import logging
    6: from collections.abc import Sequence
    7: 
    8: from pip._internal.build_env import BuildEnvironment
    9: from pip._internal.utils.logging import indent_log
   10: from pip._internal.utils.setuptools_build import make_setuptools_develop_args
   11: from pip._internal.utils.subprocess import call_subprocess
   12: 
   13: logger = logging.getLogger(__name__)
   14: 
   15: 
   16: def install_editable(
   17:     *,
   18:     global_options: Sequence[str],
   19:     prefix: str | None,
   20:     home: str | None,
   21:     use_user_site: bool,
   22:     name: str,
   23:     setup_py_path: str,
   24:     isolated: bool,
   25:     build_env: BuildEnvironment,
   26:     unpacked_source_directory: str,
   27: ) -> None:
   28:     """Install a package in editable mode. Most arguments are pass-through
   29:     to setuptools.
   30:     """
   31:     logger.info("Running setup.py develop for %s", name)
   32: 
   33:     args = make_setuptools_develop_args(
   34:         setup_py_path,
   35:         global_options=global_options,
   36:         no_user_config=isolated,
   37:         prefix=prefix,
   38:         home=home,
   39:         use_user_site=use_user_site,
   40:     )
   41: 
   42:     with indent_log():
   43:         with build_env:
   44:             call_subprocess(
   45:                 args,
   46:                 command_desc="python setup.py develop",
   47:                 cwd=unpacked_source_directory,
   48:             )
