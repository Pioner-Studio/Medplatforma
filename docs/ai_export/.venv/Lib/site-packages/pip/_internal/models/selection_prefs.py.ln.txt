    1: from __future__ import annotations
    2: 
    3: from pip._internal.models.format_control import FormatControl
    4: 
    5: 
    6: # TODO: This needs Python 3.10's improved slots support for dataclasses
    7: # to be converted into a dataclass.
    8: class SelectionPreferences:
    9:     """
   10:     Encapsulates the candidate selection preferences for downloading
   11:     and installing files.
   12:     """
   13: 
   14:     __slots__ = [
   15:         "allow_yanked",
   16:         "allow_all_prereleases",
   17:         "format_control",
   18:         "prefer_binary",
   19:         "ignore_requires_python",
   20:     ]
   21: 
   22:     # Don't include an allow_yanked default value to make sure each call
   23:     # site considers whether yanked releases are allowed. This also causes
   24:     # that decision to be made explicit in the calling code, which helps
   25:     # people when reading the code.
   26:     def __init__(
   27:         self,
   28:         allow_yanked: bool,
   29:         allow_all_prereleases: bool = False,
   30:         format_control: FormatControl | None = None,
   31:         prefer_binary: bool = False,
   32:         ignore_requires_python: bool | None = None,
   33:     ) -> None:
   34:         """Create a SelectionPreferences object.
   35: 
   36:         :param allow_yanked: Whether files marked as yanked (in the sense
   37:             of PEP 592) are permitted to be candidates for install.
   38:         :param format_control: A FormatControl object or None. Used to control
   39:             the selection of source packages / binary packages when consulting
   40:             the index and links.
   41:         :param prefer_binary: Whether to prefer an old, but valid, binary
   42:             dist over a new source dist.
   43:         :param ignore_requires_python: Whether to ignore incompatible
   44:             "Requires-Python" values in links. Defaults to False.
   45:         """
   46:         if ignore_requires_python is None:
   47:             ignore_requires_python = False
   48: 
   49:         self.allow_yanked = allow_yanked
   50:         self.allow_all_prereleases = allow_all_prereleases
   51:         self.format_control = format_control
   52:         self.prefer_binary = prefer_binary
   53:         self.ignore_requires_python = ignore_requires_python
