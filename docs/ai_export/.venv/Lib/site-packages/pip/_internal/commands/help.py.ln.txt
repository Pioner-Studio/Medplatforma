    1: from optparse import Values
    2: 
    3: from pip._internal.cli.base_command import Command
    4: from pip._internal.cli.status_codes import SUCCESS
    5: from pip._internal.exceptions import CommandError
    6: 
    7: 
    8: class HelpCommand(Command):
    9:     """Show help for commands"""
   10: 
   11:     usage = """
   12:       %prog <command>"""
   13:     ignore_require_venv = True
   14: 
   15:     def run(self, options: Values, args: list[str]) -> int:
   16:         from pip._internal.commands import (
   17:             commands_dict,
   18:             create_command,
   19:             get_similar_commands,
   20:         )
   21: 
   22:         try:
   23:             # 'pip help' with no args is handled by pip.__init__.parseopt()
   24:             cmd_name = args[0]  # the command we need help for
   25:         except IndexError:
   26:             return SUCCESS
   27: 
   28:         if cmd_name not in commands_dict:
   29:             guess = get_similar_commands(cmd_name)
   30: 
   31:             msg = [f'unknown command "{cmd_name}"']
   32:             if guess:
   33:                 msg.append(f'maybe you meant "{guess}"')
   34: 
   35:             raise CommandError(" - ".join(msg))
   36: 
   37:         command = create_command(cmd_name)
   38:         command.parser.print_help()
   39: 
   40:         return SUCCESS
