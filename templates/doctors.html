{% extends 'base.html' %}

{% block title %}Врачи{% endblock %}

{% block content %}
<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 26px;">
    <h1 style="font-size: 2.2rem; font-weight: 700; margin: 0;">Список врачей</h1>
    <button onclick="window.location.href='/add_doctor'" style="background:#445be2; color:#fff; border:none; border-radius:10px; padding:10px 26px; font-weight:600; font-size:1.1rem; cursor:pointer;">+ Добавить врача</button>
</div>
<table id="doctorsTable" style="width:100%; background:#fff; border-radius:22px; box-shadow:0 2px 12px rgba(20,40,80,.07);">
    <thead style="background:#f2f6ff;">
        <tr style="font-size:1.09rem;">
            <th style="padding:14px 0; border-radius:22px 0 0 0;">Аватар</th>
            <th>ФИО</th>
            <th>Специализация</th>
            <th>Телефон</th>
            <th>E-mail</th>
            <th>Статус</th>
            <th style="border-radius:0 22px 0 0;">Действия</th>
        </tr>
    </thead>
    <tbody>
    {% for doctor in doctors %}
        <tr style="border-bottom:1px solid #f0f0f0;">
            <td style="text-align:center;">
                <img src="{{ doctor.avatar_url }}" alt="avatar" style="width:52px; height:52px; border-radius:50%; object-fit:cover; box-shadow:0 2px 8px rgba(20,40,80,.07);">
            </td>
            <td style="font-weight:600;">
                <a href="/doctor/{{ doctor._id }}" style="color:#2236a7; text-decoration:none;">{{ doctor.full_name }}</a>
            </td>
            <td>{{ doctor.specialization }}</td>
            <td>{{ doctor.phone }}</td>
            <td>{{ doctor.email }}</td>
            <td style="color:{% if doctor.status == 'активен' %}#13b949{% else %}#d91f3c{% endif %}; font-weight:600;">
                {{ doctor.status|capitalize }}
            </td>
            <td>
                <a href="/doctor/{{ doctor._id }}" style="color:#445be2; font-weight:600;">Подробнее</a>
            </td>
        </tr>
    {% else %}
        <tr>
            <td colspan="7" style="text-align:center; color:#aaa; padding:30px;">Врачей нет</td>
        </tr>
    {% endfor %}
    </tbody>
</table>
<script>
    // Быстрый поиск по таблице
    document.getElementById('searchInput').addEventListener('keyup', function() {
        let value = this.value.toLowerCase();
        let rows = document.querySelectorAll('#doctorsTable tbody tr');
        rows.forEach(row => {
            let text = row.textContent.toLowerCase();
            row.style.display = text.includes(value) ? '' : 'none';
        });
    });
</script>
{% endblock %}
